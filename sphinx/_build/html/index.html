<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to Covid19 Visualization Project’s documentation! &mdash; Covid19 Visualization Project 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Installation and run" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> Covid19 Visualization Project
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation and run</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">covid19_project</a></li>
<li class="toctree-l1"><a class="reference internal" href="devlog.html">DevLog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Covid19 Visualization Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>Welcome to Covid19 Visualization Project’s documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="welcome-to-covid19-visualization-project-s-documentation">
<h1>Welcome to Covid19 Visualization Project’s documentation!<a class="headerlink" href="#welcome-to-covid19-visualization-project-s-documentation" title="Permalink to this heading"></a></h1>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation and run</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#run">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#run-tests">Run tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#run-in-docker">Run in docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="database.html#national-data">National Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="database.html#state-terrtories-data">State &amp; Terrtories Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">covid19_project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extract.html">extract module</a></li>
<li class="toctree-l2"><a class="reference internal" href="transform.html">transform module</a></li>
<li class="toctree-l2"><a class="reference internal" href="load.html">load module</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualize.html">visualize module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="devlog.html">DevLog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="devlog.html#ideas">Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="devlog.html#dev-log">Dev log</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
<section id="background-and-task">
<h2>Background and task<a class="headerlink" href="#background-and-task" title="Permalink to this heading"></a></h2>
<p>A common way of viewing statistics related to the COVID-19 pandemic has
been dashboards. It led to the development of various data sources and
programmatic ways of access. However, simply showing data without the
underlying context may be misleading. Hence, bringing additional
information that helps to understand and interpret data is critical. We
would love to see your ideas for building pipelines that fetch data and
relevant contextual information.</p>
<p>Set up a data processing and visualization pipeline for COVID data. You
will retrieve the data from a public API (e.g., covidtracking.com),
write code to process the data as needed, and provide visualizations of
COVID infections over time.Thetask should:</p>
<ul class="simple">
<li><p>Allow interactive exploration and interpretation of covid infections
in selected countries (e.g., US)</p></li>
<li><p>Deliver a reproducible pipeline that re-executes automatically</p></li>
<li><p>Provide a clean and well-documented code</p></li>
</ul>
</section>
<section id="database">
<h2>Database<a class="headerlink" href="#database" title="Permalink to this heading"></a></h2>
<p>The covid tracking project compiled US COVID-19-related data from
02/2022 until 03/2021. It provides data by day and state in three main
areas: testing, hospitalization, and patient outcomes. Data is provided
via an <a class="reference external" href="https://covidtracking.com/data/api/version-2">API</a> that can
be used to retrieve a <code class="docutils literal notranslate"><span class="pre">json</span></code> file.</p>
<p>As a proof of concept, this tool takes from that database the total
number of COVID-19 cases by day. This metric is accumulative; therefore,
if we want to visualize daily COVID-19 cases, we need to transform the
original data and calculate the difference. Some US health bureaus
reported cases only on weekdays, while others did it uninterrupted
daily. This explains why we see a drop in the number of cases during the
weekend. To correct this “noise”, the tool calculates a rolling mean
with a window of 7 days. This transformation smoothes the signal and
corrects this artifact; however, it tends to hamper the detection of
fast changes in the signal.</p>
</section>
<section id="solution">
<h2>Solution:<a class="headerlink" href="#solution" title="Permalink to this heading"></a></h2>
<p>The schema of the solution proposed for this task is represented in the
graph below. <code class="docutils literal notranslate"><span class="pre">PySpark</span></code> will be used for the ETL job and <code class="docutils literal notranslate"><span class="pre">Bokeh</span></code> for
generating the interactive visualization. Selected data is extracted
from the database API. Then, after a data validation checking, several
transformations are applied to the data, such as the conversion of
dates, calculation of daily differences, and time-series sequence
smoothing via rolling mean. Next, data is loaded into a parquet
database. This loading process checks for duplicates, and therefore it
can be run repeatedly without affecting the database.</p>
<a class="reference internal image-reference" href="_images/pipeline.jpeg"><img alt="_images/pipeline.jpeg" src="_images/pipeline.jpeg" style="width: 600px;" /></a>
<p>Finally, the data previously loaded in the parquet database is used to
generate a bokeh interactive plot in <code class="docutils literal notranslate"><span class="pre">html</span></code>.</p>
<a class="reference internal image-reference" href="_images/covid_plot.gif"><img alt="_images/covid_plot.gif" src="_images/covid_plot.gif" style="width: 600px;" /></a>
<p>In this proof of concept, I used the total number of COVID-19 cases.
However, it can be adapted to any of the metrics available in the API.</p>
</section>
<section id="project-structure">
<h2>Project Structure<a class="headerlink" href="#project-structure" title="Permalink to this heading"></a></h2>
<p>The structure of the project is inspired from this
<a class="reference external" href="https://github.com/AlexIoannides/pyspark-example-project">repository</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root/
 <span class="p">|</span>-- configs/
 <span class="p">|</span>   <span class="p">|</span>-- configs.json
 <span class="p">|</span>-- dependencies/
 <span class="p">|</span>   <span class="p">|</span>-- logging.py
 <span class="p">|</span>   <span class="p">|</span>-- spark.py
 <span class="p">|</span>-- COVID19_project/
 <span class="p">|</span>   <span class="p">|</span>-- __main__.py
 <span class="p">|</span>   <span class="p">|</span>-- extract.py
 <span class="p">|</span>   <span class="p">|</span>-- transform.py
 <span class="p">|</span>   <span class="p">|</span>-- load.py
 <span class="p">|</span>   <span class="p">|</span>-- visualize.py
 <span class="p">|</span>-- tests/
 <span class="p">|</span>   <span class="p">|</span>-- test_data/
 <span class="p">|</span>   <span class="p">|</span>-- <span class="p">|</span> -- test_to_date.parquet
 <span class="p">|</span>   <span class="p">|</span>-- <span class="p">|</span> -- ...
 <span class="p">|</span>   <span class="p">|</span>-- test_transform.py
 <span class="p">|</span>   <span class="p">|</span>-- data_generator.py
 <span class="p">|</span>   requirements.txt
</pre></div>
</div>
<p>The ETL task and visualization tool are contained in
<code class="docutils literal notranslate"><span class="pre">COVID19_project</span></code>. There, each file contains the methods required for
each part of the project: extraction, transformation, loading, and
visualization. Different parameters can be configured in
<code class="docutils literal notranslate"><span class="pre">configs/configs.json</span></code> and then used in transformation methods.
Additional modules that support the pySpark session and logging can be
found in <code class="docutils literal notranslate"><span class="pre">dependencies</span></code>. Finally, unit test modules are stored in
tests next to small representative portions of input and output data.
Each of the transformations methods has its own test function.</p>
</section>
<section id="ideas-for-further-development">
<h2>Ideas for further development<a class="headerlink" href="#ideas-for-further-development" title="Permalink to this heading"></a></h2>
<section id="visualization">
<h3>Visualization<a class="headerlink" href="#visualization" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Extract daily cases per state.</p></li>
<li><p>Integrate states databases with their geoboundary in a geoparquet
file.</p></li>
<li><p>Develop a map visualization of US with a colormap depending on the
cases.</p></li>
</ul>
</section>
<section id="database-1">
<span id="id1"></span><h3>Database<a class="headerlink" href="#database-1" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Implement a Hadoop/HIVE database to test performance.</p></li>
</ul>
</section>
<section id="querying">
<h3>Querying<a class="headerlink" href="#querying" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Allow custom SQL queries to retrieve information from the database.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-right" title="Installation and run" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Carlos Vivar Rios.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>